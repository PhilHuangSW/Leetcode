// #################### COUNT AND SAY ####################

// The **count-and-say** sequence is a sequence of digit strings defined by the recursive formula:

// - countAndSay(1) = "1"
// - countAndSay(n) is the way you would "say" the digit string from countAndSay(n-1), which is then converted into a different digit string.

// To determine how you "say" a digit string, split it into the **minimal** number of groups so that each group is a contiguous section all of the **same character**. Then for each group, say the number of characters, then say the character. To convert the saying into a digit string, replace the counts with a number and concatenate every saying.

// For example, the saying and conversion for digit string "3322251":

// Given a positive integer n, return the nth term of the **count-and-say sequence.**

// **Example 1:**
// ```
// Input: n = 1
// Output: "1"
// Explanation: This is the base case.
// ```

// **Example 2:**
// ```
// Input: n = 4
// Output: "1211"
// Explanation:
// countAndSay(1) = "1"
// countAndSay(2) = say "1" = one 1 = "11"
// countAndSay(3) = say "11" = two 1's = "21"
// countAndSay(4) = say "21" = one 2 + one 1 = "12" + "11" = "1211"
// ``` 

// **Constraints:**
// - 1 <= n <= 30

// #################### SOLUTION ####################
/*
 * @param {number} n
 * @return {string}
 */
var countAndSay = function(n) {
  var dp = []
  dp[0] = "1"
  dp[1] = "11"
  for (let i = 2; i < n; i++) {
    dp[i] = csHelper(dp[i-1])
  }
  return dp[n-1]
};

function csHelper(dp) {
  var ans = ""
  var idx = 1
  var current = dp[0]
  var count = 1

  while (idx != dp.length) {
    if (dp[idx] != current) {
      ans += count.toString()
      ans += current
      current = dp[idx]
      count = 1
      idx += 1
    } else {
      count += 1
      idx += 1
    }
  }

  if (idx == dp.length) {
    ans += count.toString()
    ans += current
  }
  
  return ans
};

const n1 = 1
const n2 = 4
const n3 = 8
const n4 = 10
const n5 = 13
const n6 = 29

describe("Count and Say", function() {
  it("returns a string of integers for the count and say sequence", function() {
    expect(countAndSay(n1)).toEqual("1")
  })
  it("returns a string of integers for the count and say sequence", function() {
    expect(countAndSay(n2)).toEqual("1211")
  })
  it("returns a string of integers for the count and say sequence", function() {
    expect(countAndSay(n3)).toEqual("1113213211")
  })
  it("returns a string of integers for the count and say sequence", function() {
    expect(countAndSay(n4)).toEqual("13211311123113112211")
  })
  it("returns a string of integers for the count and say sequence", function() {
    expect(countAndSay(n5)).toEqual("1321132132111213122112311311222113111221131221")
  })
  it("returns a string of integers for the count and say sequence", function() {
    expect(countAndSay(n6)).toEqual("11131221131211132221232112111312111213111213211231132132211211131221232112111312211213111213122112132113213221123113112221133112132123222112111312211312112213211231132132211211131221131211132221121311121312211213211312111322211213211321322113311213212322211231131122211311123113223112111311222112132113311213211221121332211211131221131211132221231122212213211321322112311311222113311213212322211211131221131211132221232112111312111213322112131112131221121321131211132221121321132132212321121113121112133221121321132132211331121321231231121113112221121321133112132112211213322112311311222113111231133211121312211231131122211322311311222112111312211311123113322112132113212231121113112221121321132122211322212221121123222112111312211312111322212321121113121112131112132112311321322112111312212321121113122112131112131221121321132132211231131122111213122112311311222113111221131221221321132132211331121321231231121113112221121321133112132112211213322112311311222113111231133211121312211231131122211322311311222112111312211311123113322112132113212231121113112221121321132122211322212221121123222112311311222113111231133211121312211231131112311211133112111312211213211312111322211231131122111213122112311311222112111331121113112221121113122113121113222112132113213221232112111312111213322112311311222113111221221113122112132113121113222112311311222113111221132221231221132221222112112322211211131221131211132221232112111312111213111213211231132132211211131221232112111312211213111213122112132113213221123113112221133112132123222112111312211312111322212321121113121112133221132211131221131211132221232112111312111213322112132113213221133112132113221321123113213221121113122123211211131221222112112322211231131122211311123113321112132132112211131221131211132221121321132132212321121113121112133221123113112221131112311332111213211322111213111213211231131211132211121311222113321132211221121332211213211321322113311213212312311211131122211213211331121321123123211231131122211211131221131112311332211213211321223112111311222112132113213221123123211231132132211231131122211311123113322112111312211312111322111213122112311311123112112322211213211321322113312211223113112221121113122113111231133221121321132132211331121321232221123123211231132132211231131122211331121321232221123113112221131112311332111213122112311311123112112322211211131221131211132221232112111312211322111312211213211312111322211231131122111213122112311311221132211221121332211213211321322113311213212312311211131211131221223113112221131112311332211211131221131211132211121312211231131112311211232221121321132132211331121321231231121113112221121321133112132112211213322112312321123113213221123113112221133112132123222112311311222113111231132231121113112221121321133112132112211213322112311311222113111231133211121312211231131112311211133112111312211213211312111322211231131122111213122112311311221132211221121332211211131221131211132221232112111312111213111213211231132132211211131221232112111312211213111213122112132113213221123113112221133112132123222112111312211312111322212311222122132113213221123113112221133112132123222112311311222113111231133211121321132211121311121321122112133221123113112221131112311332211322111312211312111322212321121113121112133221121321132132211331121321231231121113112221121321132122311211131122211211131221131211322113322112111312211322132113213221123113112221131112311311121321122112132231121113122113322113111221131221")
  })
})